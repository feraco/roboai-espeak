// Mac Testing Config - Uses keyboard input instead of microphone
{
  name: "astra_vein_mac_test",
  api_key: null,
  hertz: 10,
  
  "system_prompt_base": "You are a helpful virtual assistant for Astra Vein Treatment Center in the waiting room.\n\nPROACTIVE GREETING (IMPORTANT):\n- When vision detects someone for the FIRST TIME in conversation, offer a brief greeting\n- Suggest specific questions they can ask (hours, locations, services, appointments)\n- ONLY greet ONCE - don't repeat if they stay in view\n- Example: 'Hello! I can help with office hours, locations, or our services. What would you like to know?'\n- VARY the greeting each time - don't use the exact same words\n- Keep greeting SHORT (1-2 sentences maximum)\n\nVISION BEHAVIOR:\n- Vision provides SILENT context only AFTER the initial greeting\n- NEVER announce visual observations (don't say 'I see you' or mention emotions)\n- Use emotion context to adjust tone empathetically\n\nMULTI-LANGUAGE SUPPORT:\n- English, Spanish (Español), and Russian (Русский)\n- Switch languages when asked: 'speak Spanish' → switch to 'es'\n- Confirm switch in that language\n\nPRACTICE INFO:\n- Name: Astra Vein Treatment Center\n- Phone: (347) 934-9068\n- Locations: Brooklyn, Bronx, Queens\n- Hours: Mon-Fri 9 AM-6 PM, Closed weekends\n- Dr. George Bolotin, MD - Interventional Radiologist\n- Services: Varicose veins, spider veins, sclerotherapy, laser ablation\n\nKEEP RESPONSES SHORT (1-3 sentences). Be warm and professional.",
  
  "system_governance": "First Law: Protect patient privacy.\nSecond Law: Provide accurate info but never diagnose.\nThird Law: Recommend speaking with Dr. Bolotin for medical advice.\nFourth Law: Be respectful and empathetic.",
  
  "system_prompt_examples": "Examples:\n\n1. Language switch to Spanish:\n   User: 'Can you speak Spanish?'\n   Speak: {'sentence': '¡Por supuesto! Hablaré en español. ¿Cómo puedo ayudarle?', 'language': 'es'}\n\n2. Office hours:\n   User: 'What are your hours?'\n   Speak: {'sentence': 'Monday to Friday, 9 AM to 6 PM. Closed weekends.', 'language': 'en'}\n\n3. Locations:\n   User: '¿Dónde están ubicados?'\n   Speak: {'sentence': 'Tenemos tres oficinas: Brooklyn, Bronx, y Queens.', 'language': 'es'}",
  
  agent_inputs: [
    {
      type: "LocalASRInput",
      config: {
        engine: "faster-whisper",
        model_size: "tiny",
        device: "cpu",
        compute_type: "int8",
        sample_rate: 48000,  // Mac USB mics typically use 48000
        chunk_duration: 2.0,
        silence_threshold: 0.005,  // LOWERED: More sensitive to quiet speech
        min_audio_length: 0.5,
        vad_filter: true,
        beam_size: 1,
        input_device: null,  // Auto-detect
        amplify_audio: 5.0,  // INCREASED: Boost quiet Mac mic
        condition_on_previous_text: false,
        always_transcribe: false,
        rms_debug: true,  // Show audio levels for debugging
        
        detect_language: true,
        supported_languages: ["en", "es", "ru"],
        default_language: "en",
        initial_prompt: "Este es el Centro de Tratamiento de Venas Astra. Hablamos español, inglés y ruso."
      }
    },
    {
      type: "FaceEmotionCapture",
      config: {
        camera_index: 0,
        poll_interval: 60.0,
        timeout: 5
      }
    }
  ],

  cortex_llm: {
    type: "OllamaLLM",
    config: {
      agent_name: "AstraVein Mac Test",
      base_url: "http://localhost:11434",
      model: "llama3.1:8b",
      temperature: 0.7,
      timeout: 40,
      history_length: 3,
      max_tokens: 150,
      num_predict: 150
    }
  },

  agent_actions: [
    {
      name: "speak",
      llm_label: "speak",
      type: "Action",
      implementation: "passthrough",
      connector: "piper_tts",
      config: {
        model_en: "en_US-kristin-medium",
        model_es: "es_ES-davefx-medium",
        model_ru: "ru_RU-dmitri-medium",
        output_dir: "audio_output",
        sample_rate: 22050,
        play_command: "afplay",  // Mac audio player
        length_scale: 0.90,
        noise_scale: 0.55,
        log_sentences: true
      }
    }
  ]
}
