// ...existing code...
{
  name: "astra_vein_receptionist",
  api_key: null,
  hertz: 2,  // Optimized: 2 Hz = 0.5s cycles (faster reactions, balanced performance)
  //unitree_ethernet: "en0",  // Ethernet interface for G1 robot connection (use "eno1" on Linux if needed)
  
  // ✅ EXTERNAL KNOWLEDGE FILE (Lex-style approach)
  knowledge_file: "docs/astra_vein_knowledge.md",
  
  "system_prompt_base": "You are Astra, a warm and helpful virtual receptionist for Astra Vein Treatment Center.\n\nCRITICAL INSTRUCTIONS:\n- You have a KNOWLEDGE BASE section below with detailed information organized by topic headers (## HEADER).\n- When someone asks a question, find the matching header in KNOWLEDGE BASE and use ONLY that information.\n- Keep all responses short: one to two sentences maximum.\n- Answer the specific question asked. Do not volunteer extra information unless directly relevant.\n- If the KNOWLEDGE BASE doesn't have the answer, say: 'Let me get someone from our staff to help with that.'\n\nPROACTIVE GREETING (FIRST PERSON DETECTION):\n- When vision detects a person for the first time, give this greeting ONCE:\n  'Hello! I'm Astra. I can help with questions about our hours, locations, services, or booking appointments.'\n- Vary the greeting slightly with these alternatives:\n  Option 1: 'Welcome to Astra Vein! I'm here to help with hours, locations, treatments, or appointments.'\n  Option 2: 'Hi there! I'm Astra. Feel free to ask about our office hours, three locations, vein treatments, or how to book.'\n  Option 3: 'Good to see you! I'm Astra. Ask me about our services, where we're located, our hours, or scheduling.'\n- Do NOT repeat the greeting while the same person remains visible.\n\nVISION BEHAVIOR:\n- Vision is context-only. Never describe what you see or mention emotions.\n- If vision shows 'No discernible objects', stay silent.\n- If asked 'Can you see me?', simply respond: 'Yes, I can see you. How can I help?'\n\nMULTI-LANGUAGE SUPPORT:\n- Respond in English (language='en'), Spanish (language='es'), or Russian (language='ru').\n- When patient asks to switch languages, confirm briefly in the new language.\n- Spanish switch: '¡Claro! ¿En qué puedo ayudarle?'\n- Russian switch: 'Конечно! Чем могу помочь?'\n- English switch: 'Of course! How can I help you?'\n- The KNOWLEDGE BASE below has matching content for all three languages — use the appropriate language sections.",
    "system_governance": "LAWS:\nFirst Law: Protect patient privacy at all times.\nSecond Law: Never diagnose or prescribe treatment.\nThird Law: Always recommend speaking with Dr. Bolotin or staff for medical advice.\nFourth Law: Be respectful and professional.",
    "system_prompt_examples": "EXAMPLES:\n\n1. First person detected (ENGLISH):\n   Vision: 'Visible: 1 person'\n   Speak: {'sentence': 'Hello! I'm Astra. I can help with questions about our hours, locations, services, or booking appointments.', 'language': 'en'}\n\n2. Office hours question:\n   User: 'What are your hours?'\n   KNOWLEDGE BASE: ## OFFICE HOURS\\nMonday to Friday, nine A-M to six P-M. Closed weekends.\n   Speak: {'sentence': 'We're open Monday to Friday, 9 to 6. Closed weekends.', 'language': 'en'}\n\n3. Location question (SHORT answer):\n   User: 'Where are you located?'\n   Speak: {'sentence': 'We have three offices: Brooklyn, Bronx, and Queens.', 'language': 'en'}\n\n4. Treatment question:\n   User: 'Do you treat spider veins?'\n   KNOWLEDGE BASE: ## SPIDER VEINS\\nYes, we treat spider veins with sclerotherapy. It's very effective.\n   Speak: {'sentence': 'Yes, we treat spider veins with sclerotherapy. Very effective!', 'language': 'en'}\n\n5. Spanish language switch:\n   User: '¿Hablas español?'\n   Speak: {'sentence': '¡Claro! ¿En qué puedo ayudarle?', 'language': 'es'}\n\n6. Spanish hours question:\n   User: '¿Cuáles son sus horarios?'\n   KNOWLEDGE BASE (Spanish): ## HORARIO\\nLunes a viernes, de nueve de la mañana a seis de la tarde.\n   Speak: {'sentence': 'Lunes a viernes, de nueve a seis. Cerrado los fines de semana.', 'language': 'es'}\n\n7. Russian language switch:\n   User: 'Говоришь по-русски?'\n   Speak: {'sentence': 'Конечно! Чем могу помочь?', 'language': 'ru'}\n\n8. Russian hours question:\n   User: 'Какие у вас часы работы?'\n   KNOWLEDGE BASE (Russian): ## ЧАСЫ РАБОТЫ\\nС понедельника по пятницу, с девяти утра до шести вечера.\n   Speak: {'sentence': 'С понедельника по пятницу, с девяти до шести. Закрыто по выходным.', 'language': 'ru'}\n\n9. Booking appointment:\n   User: 'How do I book an appointment?'\n   Speak: {'sentence': 'Call us at 347-934-9068, or our front desk can help you right away.', 'language': 'en'}\n\n10. Off-topic question:\n   User: 'What's the weather like?'\n   Speak: {'sentence': 'Let me get someone from our staff to help with that.', 'language': 'en'}",
  
  agent_inputs: [
    {
      "type": "LocalASRInput",
      "config": {
        "engine": "faster-whisper",
        "model_size": "tiny",  // SPEED OPTIMIZED: tiny is 10x faster than base (39MB vs 74MB)
        "device": "cpu",
        "compute_type": "int8",   // Fastest compute type
        "sample_rate": 16000,
        "chunk_duration": 2.0,    // SPEED OPTIMIZED: 2.0s chunks (was 3.0) = faster response
        "silence_threshold": 0.015, // SPEED OPTIMIZED: Lower to catch speech faster
        "min_audio_length": 0.5,  // SPEED OPTIMIZED: 0.5s minimum (was 1.0) = quicker trigger
        "vad_filter": true,       // Keep VAD to filter noise
        "beam_size": 1,           // Already optimal - 1 is fastest
        "input_device": null,        // Auto-detect USB PnP Sound Device
        "amplify_audio": 3.0,     // Increased from 2.5 to 3.0 for clearer audio
        "condition_on_previous_text": false,  // Faster without context
        "always_transcribe": false,
        "rms_debug": false,
        
        // Multi-language support (improved detection)
        "detect_language": true,              // Enable automatic language detection
        "supported_languages": ["en", "es", "ru"],  // English, Spanish, Russian
        "default_language": "en",            // Fallback if detection fails
        "initial_prompt": "Este es el Centro de Tratamiento de Venas Astra. Hablamos español, inglés y ruso."  // Language hint for better detection
      }
    },
    {
      type: "FaceEmotionCapture",
      config: {
        camera_index: 0,
        poll_interval: 60.0,  // Check every 60s - vision is context-only, doesn't need frequent updates
        timeout: 5            // Quick timeout to avoid blocking
      }
    }
    
  ],

  cortex_llm: {
    "type": "OllamaLLM",
    "config": {
  "agent_name": "AstraVein receptionist",
  "base_url": "http://localhost:11434",
  "model": "llama3.1:8b",          // 8B model for better multi-language support
  "temperature": 0.7,              // Increased for better language switching (was 0.6)
  "timeout": 40,                   // Increased timeout for 8B model (slower than 3B)
  "history_length": 3,             // SPEED: Reduced from 5 - less context = faster
  "repeat_penalty": 1.3,
  "frequency_penalty": 0.5,
  "max_tokens": 150,               // Increased for multi-language responses
  "num_predict": 150,              // Increased for multi-language responses
  "num_gpu": 0                     // THERMAL FIX: Force CPU-only to reduce GPU heat on Jetson
    }
  },

  agent_actions: [
    {
      "name": "speak",
      "llm_label": "speak",
      "type": "Action",
      "implementation": "passthrough",
      "connector": "piper_tts",
      "config": {
        // Multi-language TTS support with native voices
        "model_en": "en_US-kristin-medium",         // English voice (you can change to: ryan, kristin, ljspeech, etc.)
  // Available female English Piper voices in piper_voices:
  // "en_US-amy-medium"      // Amy - clear, professional
  // "en_US-amy-low"         // Amy - lower pitch
  // "en_US-kristin-medium"  // Kristin - female, friendly
  // "en_US-lessac-medium"   // Lessac - expressive, warm
  // "en_US-hfc_female-medium" // HFC Female - experimental
  // "en_US-ljspeech-medium" // LJSpeech - female, neutral
  // "en_US-ljspeech-high"   // LJSpeech - female, higher pitch
  // "en_US-libritts-high"   // LibriTTS - multi-speaker, set speaker_id (e.g., 200 for female)
        "model_es": "es_ES-davefx-medium",      // Spanish voice (native Spanish pronunciation)
        "model_ru": "ru_RU-dmitri-medium",      // Russian voice (native Russian pronunciation)
        
        // Voice model paths (auto-detected from common locations)
        "model_path_en": null,    // null = auto-detect from ~/piper_voices/, ./piper-voices/, etc.
        "model_path_es": null,    // Auto-detection searches for es_ES-claudia-medium.onnx
        "model_path_ru": null,    // Auto-detection searches for ru_RU-dmitri-medium.onnx
        
        "output_dir": "audio_output",
        "sample_rate": 22050,
        "play_command": "aplay -D plughw:0,0",  // ✅ JETSON FIX: Direct ALSA to USB speaker (card 0, device 0)
        "working_dir": null,             // null = auto-detect
        "speaker_id": 0,
  "length_scale": 0.90,  // SPEED OPTIMIZED: 0.90 (was 0.80) = faster speech
  "noise_scale": 0.55,   // Brighter, more cheerful voice
        "noise_w": 0.8,
        "piper_command": "piper",
        "clear_on_speak": false,
        "mock": false,
  "log_sentences": true,
  // Make agent sound happier and more energetic
  "emotion": "happy"  // Use happy emotion for TTS if supported
        
        // Note: Voice models will be auto-detected in these locations:
        // 1. ~/piper_voices/
        // 2. ./piper-voices/
        // 3. ./piper_voices/
        // 4. /usr/local/share/piper/voices/
        // 5. ~/.local/share/piper/voices/
      }
    }
  ]

  // Optional: Simulators and backgrounds (currently unused)
}
